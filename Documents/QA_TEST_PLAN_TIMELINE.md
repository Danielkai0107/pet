# 上線前測試計劃與時間規劃

## 📅 測試時程規劃（建議 8-10 天）

### 階段一：核心功能測試（Day 1-2）

**目標**：確保所有核心功能正常運作

#### Day 1：客戶端測試

- **上午**（4 小時）

  - [ ] LIFF 登入與初始化（1 小時）
  - [ ] 預約流程：服務選擇、時間選擇（1.5 小時）
  - [ ] 預約流程：寵物資訊、照片上傳（1.5 小時）

- **下午**（4 小時）
  - [ ] 預約提交與 LINE 通知（1 小時）
  - [ ] 時間衝突測試（1 小時）
  - [ ] 服務歷史查看（1 小時）
  - [ ] 錯誤處理測試（1 小時）

#### Day 2：管理端測試

- **上午**（4 小時）

  - [ ] 管理員登入與權限（1 小時）
  - [ ] 預約列表與即時通知（1.5 小時）
  - [ ] 預約狀態管理（確認、完成、取消）（1.5 小時）

- **下午**（4 小時）
  - [ ] 服務紀錄管理（2 小時）
  - [ ] 商家設定功能（1.5 小時）
  - [ ] 現場預約功能（0.5 小時）

---

### 階段二：進階功能與整合測試（Day 3-4）

#### Day 3：多租戶與安全測試

- **上午**（4 小時）

  - [ ] SuperAdmin 功能測試（2 小時）
    - 建立/編輯/刪除商家
    - 訂閱管理（試用期、月訂閱、年訂閱）
  - [ ] 多租戶資料隔離測試（2 小時）
    - 建立 2 個測試商家
    - 驗證資料完全隔離

- **下午**（4 小時）
  - [ ] 安全性測試（3 小時）
    - 身份驗證
    - 權限控制
    - 輸入驗證
    - Firestore/Storage Rules
  - [ ] LINE 訊息整合測試（1 小時）
    - 所有通知類型
    - 配額管理

#### Day 4：相容性測試

- **上午**（4 小時）

  - [ ] iOS 裝置測試（2 小時）
    - iPhone SE（小螢幕）
    - iPhone 12/13/14（標準螢幕）
    - iPhone Pro Max（大螢幕）
  - [ ] Android 裝置測試（2 小時）
    - 小螢幕裝置
    - 中大螢幕裝置

- **下午**（4 小時）
  - [ ] 瀏覽器測試（管理端）（2 小時）
    - Chrome、Safari、Firefox、Edge
  - [ ] 網路環境測試（2 小時）
    - WiFi、4G、3G
    - 弱網路與斷網測試

---

### 階段三：效能與壓力測試（Day 5）

- **上午**（4 小時）

  - [ ] 效能測試（2 小時）
    - LIFF 初始化時間
    - 頁面載入時間
    - 操作響應時間
  - [ ] Lighthouse 測試（2 小時）
    - 客戶端所有頁面
    - 管理端所有頁面

- **下午**（4 小時）
  - [ ] 並發測試（2 小時）
    - 同時預約測試
    - 多管理員操作測試
  - [ ] 大量資料測試（2 小時）
    - 100+ 筆預約
    - 100+ 筆客戶
    - 篩選與搜尋效能

---

### 階段四：用戶驗收測試（Day 6-7）

#### Day 6：商家端 UAT

- **準備工作**（1 小時）

  - 準備測試帳號
  - 準備測試腳本
  - 聯繫測試用戶

- **商家 A 測試**（3 小時）

  - 初次設定商家（1 小時）
  - 接收預約並處理（1 小時）
  - 發送服務紀錄（1 小時）

- **商家 B 測試**（3 小時）

  - 完整流程測試
  - 收集回饋

- **回饋整理**（1 小時）

#### Day 7：客戶端 UAT

- **準備工作**（1 小時）

  - 準備測試 LIFF URL
  - 準備測試指引

- **客戶測試**（5 小時）

  - 招募 5-10 位真實客戶
  - 每位客戶完成完整預約流程（30 分鐘/人）
  - 收集即時回饋

- **回饋分析**（2 小時）
  - 整理問題清單
  - 評估滿意度
  - 確定需修復的問題

---

### 階段五：問題修復與回歸測試（Day 8）

- **上午**（4 小時）

  - [ ] 修復 UAT 發現的問題
  - [ ] 修復其他高優先級問題

- **下午**（4 小時）
  - [ ] 回歸測試（重新測試修復的功能）
  - [ ] 煙霧測試（快速測試所有核心功能）

---

### 階段六：上線準備（Day 9-10）

#### Day 9：環境與部署準備

- **上午**（4 小時）

  - [ ] 檢查環境變數
  - [ ] 部署 Staging 環境
  - [ ] 完整測試 Staging 環境
  - [ ] 檢查 Firebase Rules

- **下午**（4 小時）
  - [ ] 設定監控系統
  - [ ] 準備備份計劃
  - [ ] 準備回滾計劃
  - [ ] 文件最終檢查

#### Day 10：上線前最終確認

- **上午**（4 小時）

  - [ ] 最終煙霧測試
  - [ ] 檢查清單逐項確認
  - [ ] 團隊會議：上線決策
  - [ ] 準備上線腳本

- **下午**（4 小時）
  - [ ] 部署生產環境（建議非營業時間）
  - [ ] 生產環境驗證測試
  - [ ] 監控系統檢查
  - [ ] 待命準備

---

## 📊 資源需求

### 人力需求

| 角色             | 人數    | 所需時間        | 主要職責                      |
| ---------------- | ------- | --------------- | ----------------------------- |
| QA 測試工程師    | 2 人    | 全程 (10 天)    | 執行所有測試                  |
| 前端工程師       | 1 人    | 8 小時/天       | 修復前端問題                  |
| 後端工程師       | 1 人    | 4 小時/天       | 修復後端/Cloud Functions 問題 |
| 產品經理         | 1 人    | 2 小時/天       | UAT 協調、決策                |
| 測試用戶（商家） | 2-3 人  | Day 6 (3 小時)  | UAT 測試                      |
| 測試用戶（客戶） | 5-10 人 | Day 7 (30 分鐘) | UAT 測試                      |

### 裝置需求

| 裝置類型         | 數量 | 用途              |
| ---------------- | ---- | ----------------- |
| iPhone (iOS 16+) | 2 台 | LINE LIFF 測試    |
| Android 手機     | 2 台 | LINE LIFF 測試    |
| iPad             | 1 台 | 平板測試 (選擇性) |
| 電腦             | 2 台 | 管理端測試        |

### 測試環境需求

| 環境                 | 用途          | 狀態       |
| -------------------- | ------------- | ---------- |
| Staging 環境         | 主要測試環境  | [ ] 已建立 |
| 測試用 Firebase 專案 | 隔離測試資料  | [ ] 已建立 |
| 測試用 LINE 官方帳號 | LINE 訊息測試 | [ ] 已建立 |
| 測試用商家帳號 x2    | 多租戶測試    | [ ] 已建立 |

---

## ⚠️ 風險評估與應對

### 高風險項目 (High Risk)

| #   | 風險描述                             | 影響        | 機率      | 應對策略                                                   | 負責人 |
| --- | ------------------------------------ | ----------- | --------- | ---------------------------------------------------------- | ------ |
| R1  | LIFF 初始化在某些裝置上失敗          | 🔴 Critical | 🟡 Medium | 1. 增加 Timeout 時間<br>2. 優化錯誤提示<br>3. 準備降級方案 | 前端   |
| R2  | Firestore Transaction 在高並發時失敗 | 🔴 Critical | 🟡 Medium | 1. 壓力測試驗證<br>2. 增加重試機制<br>3. 優化衝突處理      | 後端   |
| R3  | LINE Messaging API 配額不足          | 🟠 High     | 🟢 Low    | 1. 監控配額使用<br>2. 設定告警<br>3. 準備升級計劃          | 後端   |
| R4  | 圖片上傳在弱網路下超時               | 🟠 High     | 🟡 Medium | 1. 優化壓縮比例<br>2. 增加超時提示<br>3. 允許稍後上傳      | 前端   |

### 中風險項目 (Medium Risk)

| #   | 風險描述                         | 影響      | 機率      | 應對策略                                                 | 負責人 |
| --- | -------------------------------- | --------- | --------- | -------------------------------------------------------- | ------ |
| R5  | UAT 測試用戶招募不足             | 🟡 Medium | 🟡 Medium | 1. 提前招募<br>2. 提供測試獎勵<br>3. 內部人員補充        | PM     |
| R6  | 舊版 iOS/Android 相容性問題      | 🟡 Medium | 🟡 Medium | 1. 明確支援版本<br>2. 友善提示升級<br>3. 降級方案        | 前端   |
| R7  | Firestore/Storage Rules 過於嚴格 | 🟡 Medium | 🟠 High   | 1. Staging 完整測試<br>2. 準備 Hotfix<br>3. 監控錯誤日誌 | 後端   |

### 低風險項目 (Low Risk)

| #   | 風險描述                | 影響   | 機率      | 應對策略                                      | 負責人 |
| --- | ----------------------- | ------ | --------- | --------------------------------------------- | ------ |
| R8  | UI 在特定裝置上顯示問題 | 🟢 Low | 🟡 Medium | 1. 多裝置測試<br>2. CSS 相容性檢查            | 前端   |
| R9  | 文件準備不完整          | 🟢 Low | 🟠 High   | 1. 及早開始準備<br>2. 使用範本<br>3. 逐步補充 | PM     |

---

## 🎯 上線標準（Go/No-Go Checklist）

### 必須達成（Go Criteria）

- [ ] **功能完整性**

  - ✅ 所有 P0 功能 100% 通過測試
  - ✅ P1 功能 90% 以上通過測試
  - ✅ 核心流程無 Blocker 級別 Bug

- [ ] **效能標準**

  - ✅ LIFF 初始化時間 < 8 秒
  - ✅ 3G 網路下首次載入 < 5 秒
  - ✅ Lighthouse Performance > 80

- [ ] **安全性**

  - ✅ Firestore/Storage Rules 已部署並測試
  - ✅ 環境變數正確設定
  - ✅ 無明顯安全漏洞

- [ ] **相容性**

  - ✅ iOS LINE App 正常運作
  - ✅ Android LINE App 正常運作
  - ✅ 主流瀏覽器（管理端）正常運作

- [ ] **用戶驗收**

  - ✅ UAT 測試完成
  - ✅ 用戶滿意度平均 > 4.0 (滿分 5.0)
  - ✅ 無 Critical 用戶反饋問題

- [ ] **營運準備**
  - ✅ 監控系統啟用
  - ✅ 備份計劃就緒
  - ✅ 客服準備完成
  - ✅ 文件準備完成

### 延後上線條件（No-Go Criteria）

若發現以下任一情況，建議延後上線：

- ❌ 存在 Critical 或 Blocker 級別 Bug 未修復
- ❌ 核心預約流程失敗率 > 5%
- ❌ LIFF 初始化失敗率 > 10%
- ❌ UAT 用戶滿意度 < 3.5
- ❌ 關鍵第三方服務（Firebase、LINE API）不穩定
- ❌ Firestore/Storage Rules 測試未完成
- ❌ 監控系統未就緒

---

## 📋 每日測試報告範本

### 測試日報 - Day X (YYYY/MM/DD)

**測試人員**：\***\*\_\*\***  
**測試階段**：\***\*\_\*\***

#### 今日完成項目

- [ ] 項目 1
- [ ] 項目 2
- [ ] 項目 3

#### 測試結果統計

- 執行測試案例：**\_** 個
- 通過：**\_** 個
- 失敗：**\_** 個
- 阻擋：**\_** 個

#### 發現問題

| ID      | 問題描述 | 嚴重度 | 狀態 | 負責人 |
| ------- | -------- | ------ | ---- | ------ |
| BUG-001 |          |        |      |        |
| BUG-002 |          |        |      |        |

#### 明日計劃

- [ ] 測試項目 1
- [ ] 測試項目 2

#### 風險與阻礙

- 無 / [描述風險]

---

## 🚀 上線當天流程（建議非營業時間）

### 上線前檢查（T-2 小時）

- [ ] 備份當前生產環境資料
- [ ] 確認回滾計劃
- [ ] 通知相關人員
- [ ] 準備監控儀表板

### 部署流程（T-1 小時）

```bash
# 1. 確認專案環境
firebase use production

# 2. 最終建構
npm run build

# 3. 部署 Firestore Rules
firebase deploy --only firestore:rules

# 4. 部署 Storage Rules
firebase deploy --only storage:rules

# 5. 部署 Cloud Functions
firebase deploy --only functions

# 6. 部署 Hosting
firebase deploy --only hosting
```

### 上線後驗證（T+0 小時）

- [ ] 煙霧測試（10 分鐘）

  - [ ] LIFF 登入
  - [ ] 建立預約
  - [ ] 管理端登入
  - [ ] 預約管理
  - [ ] LINE 訊息發送

- [ ] 監控檢查（30 分鐘）
  - [ ] Firebase Console 無錯誤
  - [ ] Performance Monitoring 正常
  - [ ] Analytics 正常收集
  - [ ] Cloud Functions 執行正常

### 上線後監控（T+24 小時）

- [ ] 每 2 小時檢查錯誤日誌
- [ ] 監控關鍵指標
  - LIFF 初始化成功率
  - 預約建立成功率
  - LINE 訊息發送成功率
  - 平均響應時間
- [ ] 收集用戶反饋

---

## 📞 緊急聯絡清單

| 角色       | 姓名 | 電話 | Email | 負責範圍        |
| ---------- | ---- | ---- | ----- | --------------- |
| 專案負責人 |      |      |       | 整體決策        |
| 技術負責人 |      |      |       | 技術問題        |
| 前端工程師 |      |      |       | 前端、LIFF      |
| 後端工程師 |      |      |       | 後端、Functions |
| 測試負責人 |      |      |       | 測試協調        |

### 外部支援

- **Firebase 支援**：https://firebase.google.com/support
- **LINE Developers**：https://developers.line.biz/console/
- **緊急技術支援**：[填入技術支援聯絡方式]

---

## ✅ 測試完成確認

### 階段完成簽核

| 階段         | 完成日期 | 測試負責人 | 技術負責人 | PM  |
| ------------ | -------- | ---------- | ---------- | --- |
| 核心功能測試 |          | [ ]        | [ ]        | [ ] |
| 進階功能測試 |          | [ ]        | [ ]        | [ ] |
| 效能測試     |          | [ ]        | [ ]        | [ ] |
| UAT 測試     |          | [ ]        | [ ]        | [ ] |
| 問題修復     |          | [ ]        | [ ]        | [ ] |
| 上線準備     |          | [ ]        | [ ]        | [ ] |

### 最終上線決策

**會議日期**：\***\*\_\_\*\***  
**參與人員**：\***\*\_\_\*\***

**決議**：

- [ ] ✅ 核准上線
- [ ] ❌ 延後上線（原因：\***\*\_\_\*\***）

**簽核**：

- 產品負責人：\***\*\_\_\*\*** (日期：**\_\_**)
- 技術負責人：\***\*\_\_\*\*** (日期：**\_\_**)
- 測試負責人：\***\*\_\_\*\*** (日期：**\_\_**)

---

**文件版本**：v1.0  
**建立日期**：2024-12-17  
**最後更新**：2024-12-17  
**維護者**：開發團隊
