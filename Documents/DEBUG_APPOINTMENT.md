# é ç´„è³‡æ–™èª¿è©¦æŒ‡å—

## å•é¡Œï¼šLINE è¨Šæ¯é¡¯ç¤ºã€Œæœªæä¾›ã€

### âœ… å·²ä¿®å¾©çš„é …ç›®

1. **å‰ç«¯ Console Log**ï¼šåŠ ä¸Šè©³ç´°çš„åƒæ•¸è¨˜éŒ„
2. **å³æ™‚å›å ±åº•éƒ¨åˆ†éš”ç·š**ï¼šç¢ºä¿åº•éƒ¨æ–‡å­—ä¸Šæ–¹æœ‰åˆ†éš”ç·š
3. **å®Œæˆåˆ†äº«åº•éƒ¨åˆ†éš”ç·š**ï¼šç¢ºä¿åº•éƒ¨æ–‡å­—ä¸Šæ–¹æœ‰åˆ†éš”ç·š

---

## ğŸ” èª¿è©¦æ­¥é©Ÿ

### æ­¥é©Ÿ 1ï¼šæª¢æŸ¥ç€è¦½å™¨ Console

1. æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ›åˆ° **Console** é ç±¤
3. é»æ“Šã€Œè‡¨æ™‚å›å ±ã€æˆ–ã€Œå®Œæˆåˆ†äº«ã€çš„ã€Œå‚³é€çµ¦ä¸»äººã€æŒ‰éˆ•
4. æŸ¥çœ‹ Console ä¸­çš„æ—¥èªŒï¼š

```javascript
ç™¼é€ LINE è¨Šæ¯: {
  functionUrl: "https://...",
  messageType: "temp-report" æˆ– "completion",
  hasImage: true/false,
  hasMessage: true/false,
  payload: {
    shopId: "...",
    userId: "...",
    imageUrl: "...",
    message: "...",
    petName: "...",
    serviceType: "???",  // â† æª¢æŸ¥é€™å€‹
    date: "???",         // â† æª¢æŸ¥é€™å€‹
    time: "???"          // â† æª¢æŸ¥é€™å€‹
  },
  appointmentData: {
    serviceType: "???",
    date: "???",
    time: "???"
  }
}
```

---

## âš ï¸ å¯èƒ½çš„å•é¡ŒåŸå› 

### åŸå›  1ï¼šè³‡æ–™åº«æ¬„ä½ç‚ºç©º

æª¢æŸ¥ Firestore ä¸­çš„é ç´„è³‡æ–™æ˜¯å¦æœ‰é€™äº›æ¬„ä½ï¼š

- `serviceType`
- `date`ï¼ˆæ ¼å¼ï¼šYYYY-MM-DDï¼‰
- `time`ï¼ˆæ ¼å¼ï¼šHH:mmï¼‰

**è§£æ±ºæ–¹æ³•**ï¼šç¢ºä¿å»ºç«‹é ç´„æ™‚é€™äº›æ¬„ä½æœ‰æ­£ç¢ºçš„å€¼

---

### åŸå›  2ï¼šAppointment ç‰©ä»¶ä¸å®Œæ•´

å‰ç«¯çš„ `appointment` ç‰©ä»¶å¯èƒ½æ²’æœ‰é€™äº›å±¬æ€§ã€‚

**æª¢æŸ¥æ–¹æ³•**ï¼šåœ¨ `AppointmentDetailPopup.tsx` åŠ ä¸Šï¼š

```typescript
useEffect(() => {
  console.log("ç•¶å‰é ç´„è³‡æ–™:", {
    id: appointment.id,
    serviceType: appointment.serviceType,
    date: appointment.date,
    time: appointment.time,
  });
}, [appointment]);
```

---

### åŸå›  3ï¼šè³‡æ–™è¼‰å…¥æ™‚æ©Ÿå•é¡Œ

å…ƒä»¶å¯èƒ½åœ¨è³‡æ–™å®Œå…¨è¼‰å…¥å‰å°±ç™¼é€äº†è«‹æ±‚ã€‚

**è§£æ±ºæ–¹æ³•**ï¼šç¢ºä¿ç™¼é€å‰æª¢æŸ¥ï¼š

```typescript
if (!appointment.serviceType || !appointment.date || !appointment.time) {
  console.warn("é ç´„è³‡æ–™ä¸å®Œæ•´:", appointment);
  toast.error("é ç´„è³‡æ–™ä¸å®Œæ•´ï¼Œè«‹ç¨å¾Œå†è©¦");
  return;
}
```

---

## ğŸ§ª æ¸¬è©¦å»ºè­°

### æ¸¬è©¦ 1ï¼šæª¢æŸ¥ç¾æœ‰é ç´„

1. åœ¨ Admin Dashboard æ‰¾ä¸€å€‹å·²å­˜åœ¨çš„é ç´„
2. æŸ¥çœ‹ Firestore ä¸­è©²é ç´„çš„è³‡æ–™
3. ç¢ºèª `serviceType`, `date`, `time` æ˜¯å¦å­˜åœ¨

### æ¸¬è©¦ 2ï¼šå»ºç«‹æ–°é ç´„

1. å¾å‰ç«¯é ç´„æµç¨‹å»ºç«‹ä¸€å€‹æ–°é ç´„
2. ç¢ºèª Firestore ä¸­å·²å„²å­˜å®Œæ•´è³‡æ–™
3. æ¸¬è©¦ç™¼é€è‡¨æ™‚å›å ±/å®Œæˆåˆ†äº«

### æ¸¬è©¦ 3ï¼šä½¿ç”¨æ¸¬è©¦è¨Šæ¯

å‰å¾€ã€Œå•†å®¶è¨­å®šã€â†’ã€Œæ¸¬è©¦ LINE è¨Šæ¯ã€

- æ¸¬è©¦è¨Šæ¯æœƒä½¿ç”¨å‡è³‡æ–™ï¼ˆæ¸¬è©¦å¯µç‰©ã€æ¸¬è©¦æœå‹™ã€2025-12-20ã€14:00ï¼‰
- ç¢ºèªæ¸¬è©¦è¨Šæ¯æ˜¯å¦æ­£å¸¸é¡¯ç¤º

---

## ğŸ“ å¦‚æœä»é¡¯ç¤ºã€Œæœªæä¾›ã€

è«‹æä¾›ä»¥ä¸‹è³‡è¨Šï¼š

1. **Console Log å®Œæ•´è¼¸å‡º**
2. **Firestore é ç´„è³‡æ–™æˆªåœ–**
3. **é ç´„æ˜¯å¦‚ä½•å»ºç«‹çš„**ï¼ˆå‰ç«¯é ç´„ / ç®¡ç†å“¡æ‰‹å‹•å»ºç«‹ï¼‰

---

## ğŸ”§ æš«æ™‚è§£æ±ºæ–¹æ¡ˆ

å¦‚æœæ€¥éœ€ä½¿ç”¨ï¼Œå¯ä»¥å…ˆåœ¨å‰ç«¯åŠ ä¸Šé è¨­å€¼ï¼š

```typescript
body: JSON.stringify({
  shopId: appointment.shopId,
  userId: appointment.userId,
  imageUrl: imageUrl,
  message: message,
  petName: appointment.petName,
  serviceType: appointment.serviceType || "æœªæŒ‡å®šæœå‹™",
  date: appointment.date || new Date().toISOString().split('T')[0],
  time: appointment.time || "æœªæŒ‡å®šæ™‚é–“",
}),
```

ä½†é€™åªæ˜¯æš«æ™‚æ–¹æ¡ˆï¼Œæ ¹æœ¬å•é¡Œé‚„æ˜¯è¦æ‰¾å‡ºç‚ºä»€éº¼è³‡æ–™æ²’æœ‰æ­£ç¢ºå‚³éã€‚

