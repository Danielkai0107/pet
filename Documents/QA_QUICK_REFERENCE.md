# 上線前測試 QC - 快速參考指南

## 🎯 測試目標

確保系統達到**商業販售標準**，提供穩定、安全、優質的用戶體驗。

---

## ⏱️ 時間規劃

**建議測試時間：8-10 天**

```
Day 1-2: 核心功能測試 (客戶端 + 管理端)
Day 3-4: 進階功能 + 相容性測試
Day 5:   效能與壓力測試
Day 6-7: 用戶驗收測試 (UAT)
Day 8:   問題修復與回歸測試
Day 9-10: 上線準備與部署
```

---

## 📋 5 大測試重點

### 1️⃣ 核心功能 [必測 P0]

**客戶端（LINE LIFF）**

- ✅ LIFF 登入 < 8 秒
- ✅ 完整預約流程（選服務 → 填寵物 → 提交）
- ✅ 照片上傳與壓縮
- ✅ LINE 訊息通知
- ✅ 時間衝突檢測

**管理端**

- ✅ 管理員登入與訂閱檢查
- ✅ 預約管理（確認、完成、取消）
- ✅ 即時通知與更新
- ✅ 服務紀錄發送（臨時回報、完成分享）
- ✅ 商家設定（服務項目、營業時間、LINE 設定）

**SuperAdmin**

- ✅ 商家管理（建立、編輯、刪除）
- ✅ 訂閱管理（試用期、付費方案、續訂）

---

### 2️⃣ 安全性 [必測 P0]

- ✅ **身份驗證**

  - 未登入無法訪問受保護頁面
  - Token 過期自動登出
  - 訂閱過期無法登入

- ✅ **權限控制**

  - Firestore Rules 正確執行
  - Storage Rules 正確執行
  - 多租戶資料完全隔離

- ✅ **輸入驗證**
  - 手機號碼格式驗證
  - 必填欄位驗證
  - 圖片類型與大小限制

---

### 3️⃣ 相容性 [必測 P0]

**LINE App 測試**

- ✅ iOS LINE App（至少 2 款裝置）
- ✅ Android LINE App（至少 2 款裝置）

**管理端瀏覽器**

- ✅ Chrome（最新版）
- ✅ Safari（最新版）

**網路環境**

- ✅ WiFi / 4G / 3G
- ✅ 弱網路與斷網處理

---

### 4️⃣ 效能 [建議 P1]

| 指標                   | 目標值  |
| ---------------------- | ------- |
| LIFF 初始化時間        | < 8 秒  |
| 首次載入時間 (3G)      | < 5 秒  |
| 預約提交時間           | < 3 秒  |
| 圖片上傳時間           | < 10 秒 |
| 即時通知延遲           | < 2 秒  |
| Lighthouse Performance | > 80    |

---

### 5️⃣ 用戶驗收 [必測 P0]

**測試對象**

- 2-3 位真實商家
- 5-10 位真實客戶

**測試內容**

- 完整業務流程
- 真實場景模擬
- 用戶滿意度調查

**通過標準**

- 滿意度平均 > 4.0（滿分 5.0）
- 無 Critical 問題
- 核心流程順暢

---

## 🚫 上線阻擋條件（絕對不能上線）

如果發現以下任一情況，**必須延後上線**：

1. ❌ LIFF 登入失敗率 > 10%
2. ❌ 預約建立失敗率 > 5%
3. ❌ 存在 Critical/Blocker 級別 Bug
4. ❌ 多租戶資料隔離失敗（資料混淆）
5. ❌ LINE 訊息發送失敗率 > 10%
6. ❌ Firestore/Storage Rules 測試未完成
7. ❌ UAT 用戶滿意度 < 3.5
8. ❌ 監控系統未就緒

---

## ✅ 上線必要條件

### 技術要求

- [x] 所有 P0 測試 100% 通過
- [x] P1 測試 90% 以上通過
- [x] 效能指標達標
- [x] 安全性測試通過
- [x] 相容性測試通過

### 環境要求

- [x] 環境變數正確設定
- [x] Firebase Rules 已部署
- [x] Cloud Functions 已部署
- [x] Firestore Indexes 已建立
- [x] LINE LIFF 設定正確

### 營運要求

- [x] UAT 測試完成
- [x] 監控系統啟用
- [x] 備份計劃就緒
- [x] 回滾計劃就緒
- [x] 客服準備完成
- [x] 用戶文件準備完成

---

## 📊 測試優先級說明

### 🔴 P0 (Critical) - 必須 100% 通過

影響核心業務流程，失敗則無法上線

**範例**：

- LIFF 登入
- 預約建立
- 預約管理
- LINE 訊息發送
- 多租戶資料隔離

### 🟠 P1 (High) - 建議 90% 以上通過

影響重要功能或用戶體驗

**範例**：

- 客戶管理
- 日曆視圖
- 效能指標
- 相容性測試

### 🟡 P2 (Medium) - 建議 80% 以上通過

一般功能，輕微問題可接受

**範例**：

- 並發壓力測試
- 大量資料測試
- 部分瀏覽器相容性

### 🟢 P3 (Low) - 選擇性測試

錦上添花功能，不影響核心流程

**範例**：

- UI 細節優化
- 非主流瀏覽器
- 邊緣案例

---

## 🔍 關鍵測試場景

### 場景 1：完整預約流程（最重要！）

```
客戶端：
1. 開啟 LIFF URL
2. 登入成功
3. 選擇服務項目
4. 選擇日期與時間
5. 填寫寵物資訊
6. 上傳寵物照片
7. 提交預約
8. 收到 LINE 確認訊息

管理端：
9. 收到即時通知
10. 確認預約
11. 客戶收到確認訊息
12. 完成預約
13. 發送完成分享
14. 客戶收到完成照片
```

**通過標準**：整個流程 < 5 分鐘，無任何錯誤

---

### 場景 2：時間衝突處理

```
1. 客戶 A 預約 2024/12/20 14:00 (2 小時服務)
2. 客戶 B 同時預約 2024/12/20 15:00
3. 只有一個成功
4. 另一個顯示「時段已被預約」
```

**通過標準**：Transaction 正確運作，無資料衝突

---

### 場景 3：多租戶隔離

```
商家 A：
- 建立預約 → 出現在商家 A 的列表
- LINE 訊息 → 發送到商家 A 的 LINE

商家 B：
- 無法看到商家 A 的預約
- 無法看到商家 A 的客戶
```

**通過標準**：資料 100% 隔離

---

## 🛠️ 測試工具

### 必備工具

- **Chrome DevTools**：效能測試、網路模擬
- **Firebase Console**：監控、日誌
- **LINE Developers Console**：LIFF 管理、訊息配額

### 推薦工具

- **Lighthouse**：效能評分
- **BrowserStack**：多裝置測試（可選）
- **Postman**：Cloud Functions 測試（可選）

---

## 🐛 問題嚴重度定義

| 等級         | 定義                       | 處理方式           |
| ------------ | -------------------------- | ------------------ |
| **Critical** | 系統無法運作、資料遺失     | 立即修復，阻擋上線 |
| **High**     | 核心功能失效、影響大量用戶 | 優先修復           |
| **Medium**   | 部分功能失效、用戶體驗不佳 | 排程修復           |
| **Low**      | 輕微問題、不影響使用       | 記錄追蹤           |

---

## 📞 測試期間緊急聯絡

### 遇到問題時

1. **記錄問題**：截圖、錯誤訊息、重現步驟
2. **評估嚴重度**：Critical / High / Medium / Low
3. **通知相關人員**：
   - Critical → 立即通知技術負責人
   - High → 1 小時內通知
   - Medium/Low → 每日報告

### 緊急聯絡清單

- 技術負責人：[電話] [Email]
- 測試負責人：[電話] [Email]
- 產品負責人：[電話] [Email]

---

## 📚 測試文件索引

1. **詳細測試清單**：`QA_TESTING_CHECKLIST.md`

   - 完整的測試項目與檢查點

2. **測試執行表**：`QA_TEST_EXECUTION_SHEET.md`

   - 表格化的測試執行記錄

3. **時間規劃**：`QA_TEST_PLAN_TIMELINE.md`

   - 詳細的時程安排與風險評估

4. **現有清單**：`PRODUCTION_CHECKLIST.md`
   - 效能優化與部署檢查清單

---

## 🚀 上線當天快速檢查（5 分鐘）

### 部署後立即測試

```bash
# 1. LIFF 登入
開啟生產環境 LIFF URL → 登入成功 ✓

# 2. 建立預約
完整預約流程 → 提交成功 ✓

# 3. 管理端
登入 → 看到預約 → 確認預約 ✓

# 4. LINE 訊息
檢查 LINE → 收到所有通知 ✓

# 5. 監控
Firebase Console → 無錯誤 ✓
```

---

## 💡 測試小技巧

### 提高測試效率

1. **建立測試資料腳本**：快速建立測試用預約、客戶
2. **使用多個測試帳號**：同時測試多租戶
3. **截圖與錄影**：記錄問題更清楚
4. **使用檢查清單**：確保不遺漏項目

### 常見陷阱

- ❌ 只測試正常流程，忽略錯誤處理
- ❌ 只測試 WiFi，忽略弱網路
- ❌ 只測試新款手機，忽略舊裝置
- ❌ 只測試自己的商家，忽略多租戶隔離

---

## 📈 測試完成標準

### 量化指標

- P0 測試通過率：100%
- P1 測試通過率：≥ 90%
- UAT 用戶滿意度：≥ 4.0/5.0
- 核心流程成功率：≥ 95%

### 質化評估

- 無 Critical/Blocker Bug
- 用戶回饋正面
- 團隊信心充足
- 監控系統就緒

---

## ✅ 最終檢查清單（上線前 1 小時）

```
環境檢查
□ 環境變數正確
□ Firebase Rules 已部署
□ Cloud Functions 已部署
□ LINE 設定正確

功能檢查
□ LIFF 登入正常
□ 預約建立正常
□ 管理端正常
□ LINE 訊息正常

監控檢查
□ Performance Monitoring 啟用
□ Analytics 啟用
□ 錯誤告警設定
□ 監控儀表板正常

準備工作
□ 備份計劃就緒
□ 回滾計劃就緒
□ 團隊待命
□ 客服準備
```

---

## 🎉 上線後持續監控（前 48 小時）

### 前 2 小時：密集監控

- 每 15 分鐘檢查錯誤日誌
- 監控關鍵指標
- 準備隨時 Hotfix

### 前 24 小時：積極監控

- 每 2 小時檢查
- 收集用戶反饋
- 記錄異常情況

### 24-48 小時：正常監控

- 每 4 小時檢查
- 整理問題清單
- 規劃優化方案

---

**記住：寧可多測一天，也不要上線後出問題！**

**祝測試順利，上線成功！** 🚀

---

**文件版本**：v1.0  
**最後更新**：2024-12-17  
**維護者**：開發團隊
